<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Controller Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
    <div class="container py-5">
        <h1 class="mb-4 text-center">Controller Hub</h1>
        <div class="card p-4 shadow-sm">
            <button id="create-controller" class="btn btn-primary w-100">Create New Controller</button>
            <div id="output" class="mt-3"></div>
        </div>
    </div>

    <script>
        document.getElementById('create-controller').addEventListener('click', () => {
            const ws = new WebSocket(`ws://${window.location.host}/ws/output`);
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.type === 'config') {
                    document.getElementById('output').innerHTML = `
                        <div class="alert alert-success">
                            Controller created!<br>
                            <strong>ID:</strong> ${data.controller_id}<br>
                            <a href="${data.join_url}" target="_blank">Join Link</a>
                        </div>`;
                }
            };
        });
    </script>
</body>

</html>